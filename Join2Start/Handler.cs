using YAMNL;
using YAMNL.Data;
using YAMNL.Handshaking.Serverbound;
using YAMNL.Login.Clientbound;
using YAMNL.Login.Serverbound;
using YAMNL.Status.Clientbound;
using YAMNL.Status.Serverbound;
using PacketPing = YAMNL.Status.Serverbound.PacketPing;

namespace Join2Start;

public class Handler : IPacketHandler
{
    public async Task HandleIncomming(IPacketPayload packetPayload, MinecraftConnection connection)
    {
        if (packetPayload is PacketSetProtocol setProtocol)
        {
            if (setProtocol.NextState == 1)
            {
                connection.ConnectionState = ConnectionState.Status;
            }

            if (setProtocol.NextState == 2)
            {
                connection.ConnectionState = ConnectionState.Login;
            }
        }

        if (packetPayload is PacketPingStart)
        {
            await connection.SendPacket(new PacketServerInfo(
                "{\"version\":{\"name\":\"\u00A7bDannyx's Servers Join2Start\u00A7f v.1\u00A7r\",\"protocol\":1},\"players\":{\"max\":1,\"online\":0,\"sample\":null},\"description\":{\"text\":\"\u00A7eServer is \u00A7aoffline\u00A7r\\n\u00A7fConnect to \u00A7 start the server\u00A7r\"},\"favicon\":\"data:image/png;base64,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Uk0AAHomAACAhAAA+gAAAIDoAAB1MAAA6mAAADqYAAAXcJy6UTwAAAAJcEhZcwAALiMAAC4jAXilP3YAAAPSaVRYdFhNTDpjb20uYWRvYmUueG1wAAAAAAA8P3hwYWNrZXQgYmVnaW49Iu+7vyIgaWQ9Ilc1TTBNcENlaGlIenJlU3pOVGN6a2M5ZCI/PiA8eDp4bXBtZXRhIHhtbG5zOng9ImFkb2JlOm5zOm1ldGEvIiB4OnhtcHRrPSJBZG9iZSBYTVAgQ29yZSA3LjEtYzAwMCA3OS45Y2NjNGRlLCAyMDIyLzAzLzE0LTExOjI2OjE5ICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtbG5zOnhtcD0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLyIgeG1sbnM6cGhvdG9zaG9wPSJodHRwOi8vbnMuYWRvYmUuY29tL3Bob3Rvc2hvcC8xLjAvIiB4bXBNTTpPcmlnaW5hbERvY3VtZW50SUQ9InhtcC5kaWQ6YWYwYTliODYtMzdiYi1lNDQ4LWE3M2EtNzJmN2ZhOGRjZmM1IiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjkxOEFBNzc1M0IxNUVCNDI4OUMwNkRGOTgxRTQ0QjYzIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOkFFMDA2NjVGODk0OEQ0NENBOUI2Q0I3QTcwQjQ0RTA1IiB4bXA6Q3JlYXRvclRvb2w9IkFkb2JlIFBob3Rvc2hvcCAyMy4zIChXaW5kb3dzKSIgcGhvdG9zaG9wOklDQ1Byb2ZpbGU9InNSR0IgSUVDNjE5NjYtMi4xIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6YWYwYTliODYtMzdiYi1lNDQ4LWE3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"}"));
        }

        if (packetPayload is PacketPing ping)
        {
            await connection.SendPacket(new YAMNL.Status.Clientbound.PacketPing(ping.Time));
        }

        if (packetPayload is PacketLoginStart start)
        {
            var s =
                "[\"\",{\"text\":\"===========================\n \u0020 \u0020 Hi " + start.Username +
                ", in ca. 30 Sekunden bis 3 Minuten sollte der Server  \"},{\"text\":\"starten\",\"color\":\"green\"},{\"text\":\"\n \u0020Bitte verbinde dich in  \"},{\"text\":\"1-3\",\"color\":\"aqua\"},{\"text\":\"\n \u0020Minuten wieder\n===========================\"}]";

            await connection.SendPacket(new PacketDisconnect(s));

            Task.Run(async () =>
            {
                await Task.Delay(1000);
                Console.WriteLine("Player connected. Exiting");
                Environment.Exit(0);
            });
        }
    }

    public Task HandleOutgoing(IPacketPayload packetPayload, MinecraftConnection connection)
    {
        return Task.CompletedTask;
    }
}
